<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë‚˜ì´ìŠ¤ ë°”ì´íŠ¸ ê³„ì‚°ê¸° & í•œêµ­ì–´ ë§ì¶¤ë²• ê²€ì‚¬ê¸°</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
            text-align: center;
            padding: 30px;
        }

        .header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0,0,0,0.3);
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }

        .main-content {
            padding: 40px;
        }

        .section {
            margin-bottom: 40px;
            padding: 30px;
            border-radius: 15px;
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            transition: all 0.3s ease;
        }

        .section:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        .section-title {
            font-size: 1.8rem;
            color: #2c3e50;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .section-title::before {
            content: '';
            width: 4px;
            height: 30px;
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            border-radius: 2px;
        }

        .textarea-container {
            position: relative;
            margin-bottom: 20px;
        }

        textarea {
            width: 100%;
            min-height: 200px;
            padding: 20px;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            font-size: 16px;
            font-family: inherit;
            resize: vertical;
            transition: all 0.3s ease;
            background: white;
        }

        textarea:focus {
            outline: none;
            border-color: #4facfe;
            box-shadow: 0 0 0 3px rgba(79, 172, 254, 0.1);
        }

        .char-count {
            position: absolute;
            bottom: 10px;
            right: 15px;
            font-size: 12px;
            color: #6c757d;
            background: rgba(255, 255, 255, 0.9);
            padding: 4px 8px;
            border-radius: 4px;
        }

        .button-group {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            min-width: 140px;
            justify-content: center;
        }

        .btn-primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .btn-secondary {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
        }

        .btn-success {
            background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
            color: white;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.2);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
            transform: none;
        }

        .loading {
            display: none;
            align-items: center;
            gap: 10px;
            color: #6c757d;
            font-style: italic;
        }

        .loading.show {
            display: flex;
        }

        .spinner {
            width: 20px;
            height: 20px;
            border: 2px solid #f3f3f3;
            border-top: 2px solid #4facfe;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .result-section {
            margin-top: 20px;
            padding: 20px;
            background: white;
            border-radius: 12px;
            border: 1px solid #e9ecef;
        }

        .corrections-list {
            margin-top: 15px;
        }

        .correction-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
            margin-bottom: 8px;
            border-left: 4px solid #dc3545;
        }

        .correction-original {
            background: #ffe6e6;
            color: #dc3545;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: 600;
        }

        .correction-arrow {
            color: #6c757d;
            font-weight: bold;
        }

        .correction-suggestion {
            background: #e6f7ff;
            color: #1890ff;
            padding: 4px 8px;
            border-radius: 4px;
            font-weight: 600;
        }

        .byte-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            background: white;
            border-radius: 12px;
            overflow: hidden;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }

        .byte-table th {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px;
            text-align: center;
            font-weight: 600;
        }

        .byte-table td {
            padding: 12px 15px;
            text-align: center;
            border-bottom: 1px solid #e9ecef;
        }

        .byte-table tr:nth-child(even) {
            background: #f8f9fa;
        }

        .byte-table tr:hover {
            background: #e3f2fd;
        }

        .file-input-container {
            margin-bottom: 20px;
        }

        .file-input {
            width: 100%;
            padding: 12px;
            border: 2px dashed #4facfe;
            border-radius: 12px;
            background: #f8f9ff;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .file-input:hover {
            background: #e3f2fd;
            border-color: #1976d2;
        }

        .success-message {
            background: #d4edda;
            color: #155724;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #c3e6cb;
            margin-top: 15px;
        }

        .error-message {
            background: #f8d7da;
            color: #721c24;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #f5c6cb;
            margin-top: 15px;
        }

        .info-message {
            background: #d1ecf1;
            color: #0c5460;
            padding: 15px;
            border-radius: 8px;
            border: 1px solid #bee5eb;
            margin-top: 15px;
        }

        .github-note {
            background: #e7f3ff;
            border: 1px solid #b3d9ff;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .github-note h4 {
            color: #0066cc;
            margin-bottom: 8px;
        }

        .github-note p {
            color: #004499;
            font-size: 14px;
            line-height: 1.5;
        }

        @media (max-width: 768px) {
            .main-content {
                padding: 20px;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .button-group {
                flex-direction: column;
            }
            
            .btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ë‚˜ì´ìŠ¤ ë°”ì´íŠ¸ ê³„ì‚°ê¸° & í•œêµ­ì–´ ë§ì¶¤ë²• ê²€ì‚¬ê¸°</h1>
            <p>í…ìŠ¤íŠ¸ ë°”ì´íŠ¸ ê³„ì‚°, ì´ë¯¸ì§€ í…ìŠ¤íŠ¸ ì¶”ì¶œ, í•œêµ­ì–´ ë§ì¶¤ë²• ê²€ì‚¬ë¥¼ í•œ ë²ˆì—</p>
        </div>

        <div class="main-content">
            <!-- GitHub Pages ì•ˆë‚´ -->
            <div class="github-note">
                <h4>ğŸ“Œ ì‹œê°„ ë¶€ì¡±ìœ¼ë¡œ ì¸í•œ ê¸°ëŠ¥ì¥ì•  ì•ˆë‚´(ì§„ë¡œ ë°œí‘œ 1íšŒìš©ì´ë¯€ë¡œ ì•„ë§ˆë„ ìˆ˜ì • ê³„íš X)</h4>
                <p>í…ìŠ¤íŠ¸ ì¸ì‹ ê¸°ëŠ¥(ê´‘í•™ ë¬¸ì ì¸ì‹)ì€ ì†ê¸€ì”¨ë¥¼ ì¸ì‹í•˜ì§€ ëª»í•©ë‹ˆë‹¤. ë§ì¶¤ë²• ê²€ì‚¬ëŠ” í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ê·œì¹™ ê¸°ë°˜ìœ¼ë¡œ ì‘ë™í•˜ë©°, ì¼ë°˜ì ì¸ ë§ì¶¤ë²• ì˜¤ë¥˜ë¥¼ ê°ì§€í•˜ë¯€ë¡œ ì˜¤íƒ€ íƒì§€ìœ¨ì´ ë‚®ìŠµë‹ˆë‹¤.</p>
            </div>

            <!-- í…ìŠ¤íŠ¸ ì…ë ¥ ì„¹ì…˜ -->
            <div class="section">
                <h2 class="section-title">ğŸ“ í…ìŠ¤íŠ¸ ì…ë ¥</h2>
                <div class="textarea-container">
                    <textarea id="textInput" placeholder="ì—¬ê¸°ì— í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ì„¸ìš”..."></textarea>
                    <div class="char-count" id="charCount">0ì</div>
                </div>
                
                <div class="button-group">
                    <button class="btn btn-primary" onclick="calculateBytes()">
                        ğŸ“Š ë°”ì´íŠ¸ ê³„ì‚°
                    </button>
                    <button class="btn btn-secondary" onclick="checkSpelling()" id="spellCheckBtn">
                        âœï¸ ë§ì¶¤ë²• ê²€ì‚¬
                    </button>
                </div>

                <div class="loading" id="spellCheckLoading">
                    <div class="spinner"></div>
                    <span>ë§ì¶¤ë²•ì„ ê²€ì‚¬í•˜ê³  ìˆìŠµë‹ˆë‹¤...</span>
                </div>

                <div id="spellCheckResult"></div>
            </div>

            <!-- ì´ë¯¸ì§€ í…ìŠ¤íŠ¸ ì¶”ì¶œ ì„¹ì…˜ -->
            <div class="section">
                <h2 class="section-title">ğŸ–¼ï¸ ì´ë¯¸ì§€ì—ì„œ í…ìŠ¤íŠ¸ ì¶”ì¶œ</h2>
                <p style="margin-bottom: 15px; color: #6c757d;">ì´ë¯¸ì§€ë¥¼ ì„ íƒí•˜ë©´ í…ìŠ¤íŠ¸ë¥¼ ì¶”ì¶œí•©ë‹ˆë‹¤ (ì•½ê°„ì˜ ì‹œê°„ì´ ì†Œìš”ë©ë‹ˆë‹¤)</p>
                
                <div class="file-input-container">
                    <input type="file" id="imageInput" accept="image/*" class="file-input" onchange="extractTextFromImage()">
                </div>
                
                <div class="loading" id="ocrLoading">
                    <div class="spinner"></div>
                    <span>ì´ë¯¸ì§€ì—ì„œ í…ìŠ¤íŠ¸ë¥¼ ì¶”ì¶œí•˜ê³  ìˆìŠµë‹ˆë‹¤...</span>
                </div>
            </div>

            <!-- ë°”ì´íŠ¸ ì •ë³´ ì„¹ì…˜ -->
            <div class="section">
                <h2 class="section-title">ğŸ“ˆ ë°”ì´íŠ¸ ì •ë³´</h2>
                <table class="byte-table" id="byteTable">
                    <thead>
                        <tr>
                            <th>í•­ëª©/í•­ëª©</th>
                            <th>í—ˆìš© ë°”ì´íŠ¸ ìˆ˜</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>ììœ¨í™œë™</td><td>1500 Bytes</td></tr>
                        <tr><td>ë™ì•„ë¦¬í™œë™</td><td>1500 Bytes</td></tr>
                        <tr><td>ì§„ë¡œí™œë™</td><td>2100 Bytes</td></tr>
                        <tr><td>êµê³¼ì„¸íŠ¹</td><td>1500 Bytes</td></tr>
                        <tr><td>í–‰ë™íŠ¹ì„± ë° ì¢…í•©ì˜ê²¬</td><td>1500 Bytes</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script>
        // ë¬¸ì ìˆ˜ ì¹´ìš´í„°
        const textInput = document.getElementById('textInput');
        const charCount = document.getElementById('charCount');

        textInput.addEventListener('input', function() {
            const count = this.value.length;
            charCount.textContent = `${count}ì`;
        });

        // ë°”ì´íŠ¸ ê³„ì‚° í•¨ìˆ˜
        function calculateBytes() {
            const text = textInput.value;
            if (!text.trim()) {
                showMessage('í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.', 'error');
                return;
            }

            const utf8Bytes = new TextEncoder().encode(text).length;
            const utf16Bytes = text.length * 2;
            const asciiBytes = text.replace(/[^\x00-\x7F]/g, "").length;

            // ë°”ì´íŠ¸ í…Œì´ë¸” ì—…ë°ì´íŠ¸
            const tableBody = document.querySelector('#byteTable tbody');
            tableBody.innerHTML = `
                <tr><td>ì…ë ¥ëœ í…ìŠ¤íŠ¸</td><td>${utf8Bytes} Bytes (UTF-8)</td></tr>
                <tr><td>ììœ¨í™œë™</td><td>1500 Bytes</td></tr>
                <tr><td>ë™ì•„ë¦¬í™œë™</td><td>1500 Bytes</td></tr>
                <tr><td>ì§„ë¡œí™œë™</td><td>2100 Bytes</td></tr>
                <tr><td>êµê³¼ì„¸íŠ¹</td><td>1500 Bytes</td></tr>
                <tr><td>í–‰ë™íŠ¹ì„± ë° ì¢…í•©ì˜ê²¬</td><td>1500 Bytes</td></tr>
                <tr><td>UTF-16 ì¸ì½”ë”©</td><td>${utf16Bytes} Bytes</td></tr>
                <tr><td>ASCII ë¬¸ìë§Œ</td><td>${asciiBytes} Bytes</td></tr>
            `;

            showMessage(`í…ìŠ¤íŠ¸ ë°”ì´íŠ¸ ê³„ì‚°ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤. (UTF-8: ${utf8Bytes} bytes)`, 'success');
        }

        // í™•ì¥ëœ í´ë¼ì´ì–¸íŠ¸ ì‚¬ì´ë“œ ë§ì¶¤ë²• ê²€ì‚¬ í•¨ìˆ˜
        function checkSpelling() {
            const text = textInput.value;
            if (!text.trim()) {
                showMessage('ë§ì¶¤ë²•ì„ ê²€ì‚¬í•  í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.', 'error');
                return;
            }

            const spellCheckBtn = document.getElementById('spellCheckBtn');
            const loading = document.getElementById('spellCheckLoading');
            const resultDiv = document.getElementById('spellCheckResult');

            // UI ìƒíƒœ ë³€ê²½
            spellCheckBtn.disabled = true;
            loading.classList.add('show');
            resultDiv.innerHTML = '';

            // ì•½ê°„ì˜ ì§€ì—°ì„ ì£¼ì–´ ì‹¤ì œ ê²€ì‚¬í•˜ëŠ” ëŠë‚Œì„ ì¤Œ
            setTimeout(() => {
                try {
                    const result = performComprehensiveSpellCheck(text);
                    displaySpellCheckResult(result);
                } catch (error) {
                    console.error('ë§ì¶¤ë²• ê²€ì‚¬ ì˜¤ë¥˜:', error);
                    showMessage(`ë§ì¶¤ë²• ê²€ì‚¬ ì˜¤ë¥˜: ${error.message}`, 'error');
                } finally {
                    // UI ìƒíƒœ ë³µì›
                    spellCheckBtn.disabled = false;
                    loading.classList.remove('show');
                }
            }, 500);
        }

        // í¬ê´„ì ì¸ ê·œì¹™ ê¸°ë°˜ ë§ì¶¤ë²• ê²€ì‚¬
        function performComprehensiveSpellCheck(text) {
            const corrections = [];
            let correctedText = text;

            // í™•ì¥ëœ ë§ì¶¤ë²• ì˜¤ë¥˜ íŒ¨í„´
            const spellRules = {
                // ê¸°ë³¸ì ì¸ ë§ì¶¤ë²• ì˜¤ë¥˜
                'ë˜ìš”': 'ë¼ìš”',
                'ì•ˆë˜ìš”': 'ì•ˆ ë¼ìš”',
                'í• ê»˜ìš”': 'í• ê²Œìš”',
                'ê°ˆê»˜ìš”': 'ê°ˆê²Œìš”',
                'ì˜¬ê»˜ìš”': 'ì˜¬ê²Œìš”',
                'ë§Œë“¤ê»˜ìš”': 'ë§Œë“¤ê²Œìš”',
                'ê·¸ë ‡ë°ìš”': 'ê·¸ëŸ°ë°ìš”',
                'ì–´ë–»í•´': 'ì–´ë–»ê²Œ',
                'ì™ ì§€': 'ì›¬ì§€',
                'ê¸ˆìƒˆ': 'ê¸ˆì„¸',
                'ë˜ê°€ì§€ê³ ': 'ë¼ì„œ',
                
                // ë„ì–´ì“°ê¸° ì˜¤ë¥˜
                'ì•ˆë˜ë‹¤': 'ì•ˆ ë˜ë‹¤',
                'ëª»ë˜ë‹¤': 'ëª» ë˜ë‹¤',
                'ì˜ë˜ë‹¤': 'ì˜ ë˜ë‹¤',
                'ì•ˆë¼': 'ì•ˆ ë¼',
                'ëª»ë¼': 'ëª» ë¼',
                'ì˜ë¼': 'ì˜ ë¼',
                'ì•ˆí•´': 'ì•ˆ í•´',
                'ëª»í•´': 'ëª» í•´',
                'ì˜í•´': 'ì˜ í•´',
                'ì•ˆê°€': 'ì•ˆ ê°€',
                'ëª»ê°€': 'ëª» ê°€',
                'ì˜ê°€': 'ì˜ ê°€',
                'ì•ˆì™€': 'ì•ˆ ì™€',
                'ëª»ì™€': 'ëª» ì™€',
                'ì˜ì™€': 'ì˜ ì™€',
                'ì•ˆë³´ë‹¤': 'ì•ˆ ë³´ë‹¤',
                'ëª»ë³´ë‹¤': 'ëª» ë³´ë‹¤',
                'ì˜ë³´ë‹¤': 'ì˜ ë³´ë‹¤',
                'ì•ˆë¨¹ë‹¤': 'ì•ˆ ë¨¹ë‹¤',
                'ëª»ë¨¹ë‹¤': 'ëª» ë¨¹ë‹¤',
                'ì˜ë¨¹ë‹¤': 'ì˜ ë¨¹ë‹¤',
                'ì•ˆìë‹¤': 'ì•ˆ ìë‹¤',
                'ëª»ìë‹¤': 'ëª» ìë‹¤',
                'ì˜ìë‹¤': 'ì˜ ìë‹¤',
                
                // ì–´ë¯¸ ì˜¤ë¥˜
                'ë°': 'ëŒ€',
                'ë˜ì§€': 'ë“ ì§€',
                'ë˜ê°€': 'ë“ ê°€',
                'ë˜': 'ë“ ',
                
                // ìì£¼ í‹€ë¦¬ëŠ” ë‹¨ì–´ë“¤
                'ì–´ë–»í•˜ë‹¤': 'ì–´ë–»ê²Œ í•˜ë‹¤',
                'ì–´ë–»ê²Œí•˜ë‹¤': 'ì–´ë–»ê²Œ í•˜ë‹¤',
                'ê·¸ë ‡ë°ìš”': 'ê·¸ëŸ°ë°ìš”',
                'ì–´ë–»ë“ ': 'ì–´ì¨Œë“ ',
                'ì–´ë–»ë“ ì§€': 'ì–´ì¨Œë“ ì§€',
                'ë¨¸ë¦¬ë§': 'ë¨¸ë¦¿ë§',
                'ë‚˜ë¬´ê°€ì§€': 'ë‚˜ë­‡ê°€ì§€',
                'ì»´í“¨íƒ€': 'ì»´í“¨í„°',
                'ìˆìœ¼ì‹œë‹¤': 'ê³„ì‹œë‹¤',
                'ë¶€ì¹˜ë‹¤': 'ë¶™ì´ë‹¤',
                'ë¶™íˆë‹¤': 'ë¶™ì´ë‹¤',
                'ëŠ˜ì´ë‹¤': 'ëŠ˜ë¦¬ë‹¤',
                
                // ì¡°ì‚¬ ê´€ë ¨
                'ë¡œì„œ': 'ë¡œì¨',
                'ë¡œì¨': 'ë¡œì„œ',
                
                // ë†’ì„ í‘œí˜„
                'í•˜ì‹­ì‹œìš”': 'í•˜ì‹­ì‹œì˜¤',
                'ì•ˆë…•í•˜ì‹­ì‹œìš”': 'ì•ˆë…•í•˜ì‹­ì‹œì˜¤',
                'ê°ì‚¬í•©ë‹ˆë‹¤': 'ê°ì‚¬í•©ë‹ˆë‹¤',
                
                // ê¸°íƒ€ ìì£¼ í‹€ë¦¬ëŠ” í‘œí˜„
                'ë§ì¶”ë‹¤': 'ë§íˆë‹¤',
                'ë§íˆë‹¤': 'ë§ì¶”ë‹¤',
                'ëŠ˜ì–´ë‚˜ë‹¤': 'ëŠ˜ì–´ë‚˜ë‹¤',
                'ì¤„ì–´ë“¤ë‹¤': 'ì¤„ì–´ë“¤ë‹¤',
                
                // ì™¸ë˜ì–´ í‘œê¸°
                'ì»´í“¨íƒ€': 'ì»´í“¨í„°',
                'í”„ë¡œê·¸ë˜ë¨¸': 'í”„ë¡œê·¸ë˜ë¨¸',
                'í”„ë¡œê·¸ë¨': 'í”„ë¡œê·¸ë¨',
                'í”„ë¡œê·¸ë˜ë°': 'í”„ë¡œê·¸ë˜ë°',
                
                // ë°œìŒì— ë”°ë¥¸ ì˜¤ë¥˜
                'ë¨¸ë¦¬ì¹´ë½': 'ë¨¸ë¦¬ì¹´ë½',
                'ë¨¸ë¦¬ì¹¼': 'ë¨¸ë¦¬ì¹´ë½',
                'ë°”ëŒê°œë¹„': 'ë°”ëŒê°œë¹„',
                'ë°”ëŒê²Œë¹„': 'ë°”ëŒê°œë¹„',
                
                // ë³µí•©ì–´ ë„ì–´ì“°ê¸°
                'í•œêµ­ë§': 'í•œêµ­ì–´',
                'ì˜ì–´ë§': 'ì˜ì–´',
                'ì¼ë³¸ë§': 'ì¼ë³¸ì–´',
                'ì¤‘êµ­ë§': 'ì¤‘êµ­ì–´',
                
                // ì‹œê°„ í‘œí˜„
                'ëª‡ì‹œ': 'ëª‡ ì‹œ',
                'ëª‡ë¶„': 'ëª‡ ë¶„',
                'ëª‡ì´ˆ': 'ëª‡ ì´ˆ',
                'ëª‡ì¼': 'ë©°ì¹ ',
                'ëª‡ë‹¬': 'ëª‡ ë‹¬',
                'ëª‡ë…„': 'ëª‡ ë…„',
                
                // ìˆ˜ëŸ‰ í‘œí˜„
                'ëª‡ê°œ': 'ëª‡ ê°œ',
                'ëª‡ëª…': 'ëª‡ ëª…',
                'ëª‡ë²ˆ': 'ëª‡ ë²ˆ',
                'ëª‡ê°€ì§€': 'ëª‡ ê°€ì§€',
                
                // ì˜ì¡´ëª…ì‚¬
                'ê²ƒ': 'ê²ƒ',
                'ìˆ˜': 'ìˆ˜',
                'ë•Œ': 'ë•Œ',
                'ê³³': 'ê³³',
                'ë°”': 'ë°”',
                
                // ì¡°ì‚¬ ë„ì–´ì“°ê¸°
                'ì—ì„œ': 'ì—ì„œ',
                'ì—ê²Œ': 'ì—ê²Œ',
                'ì—ê²Œì„œ': 'ì—ê²Œì„œ',
                'ìœ¼ë¡œ': 'ìœ¼ë¡œ',
                'ë¡œ': 'ë¡œ',
                'ì™€': 'ì™€',
                'ê³¼': 'ê³¼',
                'í•˜ê³ ': 'í•˜ê³ ',
                
                // ì–´ê°„ + ì–´ë¯¸
                'ë¨¹ì–´ìš”': 'ë¨¹ì–´ìš”',
                'ê°€ìš”': 'ê°€ìš”',
                'ì™€ìš”': 'ì™€ìš”',
                'í•´ìš”': 'í•´ìš”',
                'ë´ìš”': 'ë´ìš”',
                
                // ë¶€ì‚¬
                'ì•„ì£¼': 'ì•„ì£¼',
                'ë§¤ìš°': 'ë§¤ìš°',
                'ì •ë§': 'ì •ë§',
                'ì§„ì§œ': 'ì§„ì§œ',
                'ë„ˆë¬´': 'ë„ˆë¬´',
                
                // ê°íƒ„ì‚¬
                'ì•„': 'ì•„',
                'ì–´': 'ì–´',
                'ì˜¤': 'ì˜¤',
                'ìš°': 'ìš°',
                'ì´': 'ì´',
                
                // ì ‘ì†ì‚¬
                'ê·¸ë¦¬ê³ ': 'ê·¸ë¦¬ê³ ',
                'ê·¸ëŸ¬ë‚˜': 'ê·¸ëŸ¬ë‚˜',
                'í•˜ì§€ë§Œ': 'í•˜ì§€ë§Œ',
                'ê·¸ëŸ°ë°': 'ê·¸ëŸ°ë°',
                'ë”°ë¼ì„œ': 'ë”°ë¼ì„œ',
                'ê·¸ëŸ¬ë¯€ë¡œ': 'ê·¸ëŸ¬ë¯€ë¡œ',
                
                // ê´€í˜•ì‚¬
                'ì´': 'ì´',
                'ê·¸': 'ê·¸',
                'ì €': 'ì €',
                'ì–´ë–¤': 'ì–´ë–¤',
                'ë¬´ìŠ¨': 'ë¬´ìŠ¨',
                'ì–´ëŠ': 'ì–´ëŠ',
                
                // ëŒ€ëª…ì‚¬
                'ë‚˜': 'ë‚˜',
                'ë„ˆ': 'ë„ˆ',
                'ìš°ë¦¬': 'ìš°ë¦¬',
                'ì—¬ëŸ¬ë¶„': 'ì—¬ëŸ¬ë¶„',
                'ê·¸ë“¤': 'ê·¸ë“¤',
                
                // ë™ì‚¬
                'í•˜ë‹¤': 'í•˜ë‹¤',
                'ê°€ë‹¤': 'ê°€ë‹¤',
                'ì˜¤ë‹¤': 'ì˜¤ë‹¤',
                'ë³´ë‹¤': 'ë³´ë‹¤',
                'ë“£ë‹¤': 'ë“£ë‹¤',
                'ë§í•˜ë‹¤': 'ë§í•˜ë‹¤',
                'ì“°ë‹¤': 'ì“°ë‹¤',
                'ì½ë‹¤': 'ì½ë‹¤',
                
                // í˜•ìš©ì‚¬
                'ì¢‹ë‹¤': 'ì¢‹ë‹¤',
                'ë‚˜ì˜ë‹¤': 'ë‚˜ì˜ë‹¤',
                'í¬ë‹¤': 'í¬ë‹¤',
                'ì‘ë‹¤': 'ì‘ë‹¤',
                'ë†’ë‹¤': 'ë†’ë‹¤',
                'ë‚®ë‹¤': 'ë‚®ë‹¤',
                
                // ëª…ì‚¬
                'ì‚¬ëŒ': 'ì‚¬ëŒ',
                'ì§‘': 'ì§‘',
                'í•™êµ': 'í•™êµ',
                'íšŒì‚¬': 'íšŒì‚¬',
                'ê°€ì¡±': 'ê°€ì¡±',
                'ì¹œêµ¬': 'ì¹œêµ¬'
            };

            // ê° ê·œì¹™ì„ ì ìš©
            for (const [wrong, correct] of Object.entries(spellRules)) {
                if (correctedText.includes(wrong)) {
                    corrections.push({
                        original: wrong,
                        suggestion: correct
                    });
                    correctedText = correctedText.replaceAll(wrong, correct);
                }
            }

            // ì •ê·œí‘œí˜„ì‹ì„ ì‚¬ìš©í•œ íŒ¨í„´ ê¸°ë°˜ ê²€ì‚¬
            const patterns = [
                // ~ã„¹ê»˜ -> ~ã„¹ê²Œ íŒ¨í„´
                {
                    pattern: /([ê°€-í£]+)ã„¹ê»˜([ê°€-í£]*)/g,
                    replacement: '$1ã„¹ê²Œ$2',
                    description: '~ã„¹ê»˜ â†’ ~ã„¹ê²Œ'
                },
                // ì•ˆ~ã„´ë‹¤ -> ì•ˆ ~ã„´ë‹¤ íŒ¨í„´ (ì¼ë¶€)
                {
                    pattern: /ì•ˆ([ê°€-í£]+ë‹¤)/g,
                    replacement: 'ì•ˆ $1',
                    description: 'ì•ˆ~ë‹¤ â†’ ì•ˆ ~ë‹¤'
                },
                // ëª»~ã„´ë‹¤ -> ëª» ~ã„´ë‹¤ íŒ¨í„´ (ì¼ë¶€)
                {
                    pattern: /ëª»([ê°€-í£]+ë‹¤)/g,
                    replacement: 'ëª» $1',
                    description: 'ëª»~ë‹¤ â†’ ëª» ~ë‹¤'
                }
            ];

            for (const patternObj of patterns) {
                const matches = correctedText.match(patternObj.pattern);
                if (matches) {
                    for (const match of matches) {
                        const replacement = match.replace(patternObj.pattern, patternObj.replacement);
                        if (match !== replacement) {
                            corrections.push({
                                original: match,
                                suggestion: replacement
                            });
                        }
                    }
                    correctedText = correctedText.replace(patternObj.pattern, patternObj.replacement);
                }
            }

            return {
                original_text: text,
                corrected_text: correctedText,
                corrections: corrections,
                has_errors: corrections.length > 0
            };
        }

        // ë§ì¶¤ë²• ê²€ì‚¬ ê²°ê³¼ í‘œì‹œ
        function displaySpellCheckResult(data) {
            const resultDiv = document.getElementById('spellCheckResult');
            
            if (!data.has_errors) {
                resultDiv.innerHTML = `
                    <div class="success-message">
                        âœ… ë§ì¶¤ë²• ì˜¤ë¥˜ê°€ ë°œê²¬ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤!
                    </div>
                `;
                return;
            }

            let correctionsHtml = '';
            if (data.corrections && data.corrections.length > 0) {
                correctionsHtml = `
                    <div class="corrections-list">
                        <h4 style="margin-bottom: 10px; color: #2c3e50;">ë°œê²¬ëœ ë§ì¶¤ë²• ì˜¤ë¥˜:</h4>
                        ${data.corrections.map(correction => `
                            <div class="correction-item">
                                <span class="correction-original">${correction.original}</span>
                                <span class="correction-arrow">â†’</span>
                                <span class="correction-suggestion">${correction.suggestion}</span>
                            </div>
                        `).join('')}
                    </div>
                `;
            }

            resultDiv.innerHTML = `
                <div class="result-section">
                    <h3 style="color: #2c3e50; margin-bottom: 15px;">ë§ì¶¤ë²• ê²€ì‚¬ ê²°ê³¼</h3>
                    
                    <div style="margin-bottom: 20px;">
                        <h4 style="color: #6c757d; margin-bottom: 8px;">ìˆ˜ì •ëœ í…ìŠ¤íŠ¸:</h4>
                        <div style="background: #f8f9fa; padding: 15px; border-radius: 8px; border-left: 4px solid #28a745;">
                            ${data.corrected_text}
                        </div>
                    </div>

                    ${correctionsHtml}

                    <button class="btn btn-success" onclick="applyCorrectedText(\`${data.corrected_text.replace(/`/g, '\\`')}\`)">
                        âœ… ìˆ˜ì •ëœ í…ìŠ¤íŠ¸ ì ìš©
                    </button>
                </div>
            `;
        }

        // ìˆ˜ì •ëœ í…ìŠ¤íŠ¸ ì ìš©
        function applyCorrectedText(correctedText) {
            textInput.value = correctedText;
            charCount.textContent = `${correctedText.length}ì`;
            showMessage('ìˆ˜ì •ëœ í…ìŠ¤íŠ¸ê°€ ì ìš©ë˜ì—ˆìŠµë‹ˆë‹¤.', 'success');
        }

        // ì´ë¯¸ì§€ì—ì„œ í…ìŠ¤íŠ¸ ì¶”ì¶œ (Tesseract.js ì‚¬ìš©)
        async function extractTextFromImage() {
            const fileInput = document.getElementById('imageInput');
            const file = fileInput.files[0];
            
            if (!file) return;

            const loading = document.getElementById('ocrLoading');
            loading.classList.add('show');

            try {
                // Tesseract.js CDN ë¡œë“œ
                if (typeof Tesseract === 'undefined') {
                    await loadTesseract();
                }

                const result = await Tesseract.recognize(file, 'kor+eng');
                const extractedText = result.data.text.trim();

                if (extractedText) {
                    textInput.value = extractedText;
                    charCount.textContent = `${extractedText.length}ì`;
                    showMessage('ì´ë¯¸ì§€ì—ì„œ í…ìŠ¤íŠ¸ë¥¼ ì„±ê³µì ìœ¼ë¡œ ì¶”ì¶œí–ˆìŠµë‹ˆë‹¤.', 'success');
                } else {
                    showMessage('ì´ë¯¸ì§€ì—ì„œ í…ìŠ¤íŠ¸ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.', 'error');
                }
            } catch (error) {
                console.error('OCR ì˜¤ë¥˜:', error);
                showMessage('ì´ë¯¸ì§€ í…ìŠ¤íŠ¸ ì¶”ì¶œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.', 'error');
            } finally {
                loading.classList.remove('show');
            }
        }

        // Tesseract.js ë™ì  ë¡œë“œ
        function loadTesseract() {
            return new Promise((resolve, reject) => {
                const script = document.createElement('script');
                script.src = 'https://cdn.jsdelivr.net/npm/tesseract.js@4/dist/tesseract.min.js';
                script.onload = resolve;
                script.onerror = reject;
                document.head.appendChild(script);
            });
        }

        // ë©”ì‹œì§€ í‘œì‹œ í•¨ìˆ˜
        function showMessage(message, type = 'info') {
            // ê¸°ì¡´ ë©”ì‹œì§€ ì œê±°
            const existingMessages = document.querySelectorAll('.success-message, .error-message, .info-message');
            existingMessages.forEach(msg => msg.remove());

            const messageDiv = document.createElement('div');
            messageDiv.className = `${type}-message`;
            messageDiv.textContent = message;

            // ì²« ë²ˆì§¸ ì„¹ì…˜ì— ë©”ì‹œì§€ ì¶”ê°€
            const firstSection = document.querySelector('.section');
            firstSection.appendChild(messageDiv);

            // 3ì´ˆ í›„ ë©”ì‹œì§€ ì œê±°
            setTimeout(() => {
                messageDiv.remove();
            }, 3000);
        }
    </script>
</body>
</html>

